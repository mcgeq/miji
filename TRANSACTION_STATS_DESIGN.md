# Transaction 统计分析界面设计

## 功能概述

本统计分析界面为Transaction（交易）数据提供了全面的统计分析功能，支持多维度数据分析和可视化展示。

## 主要功能

### 1. 时间维度统计
- **年度统计**: 按年份查看交易趋势
- **月度统计**: 按月份分析收支情况
- **周度统计**: 按周查看短期趋势

### 2. 分类统计
- **主分类统计**: 按交易分类进行统计
- **子分类统计**: 支持子分类的详细分析
- **分类占比**: 显示各分类在总支出中的占比

### 3. 筛选功能
- **时间范围**: 支持自定义时间范围选择
- **预设范围**: 提供今天、本周、本月、上月、今年、去年等快捷选择
- **分类筛选**: 可按分类和子分类筛选
- **账户筛选**: 可按特定账户筛选
- **交易类型**: 支持收入、支出、转账等类型筛选
- **货币筛选**: 支持按货币类型筛选

### 4. 可视化图表
- **收支趋势图**: 支持柱状图、折线图、面积图三种展示方式
- **分类统计图**: 饼图、环形图、条形图多种展示形式
- **雷达图**: 多维度分类分析
- **交互功能**: 图表类型切换、数据筛选、悬停提示
- **动画效果**: 流畅的加载和交互动画
- **响应式设计**: 自适应不同屏幕尺寸

### 5. 详细统计表格
- **排名显示**: 按金额排序显示分类排名
- **详细数据**: 显示金额、占比、笔数、平均值等
- **趋势指示**: 提供趋势可视化指示

## 技术实现

### 前端架构
- **Vue 3 + TypeScript**: 使用现代前端技术栈
- **ECharts + vue-echarts**: 专业图表库，支持多种图表类型
- **组件化设计**: 模块化的组件结构
- **响应式布局**: 支持桌面和移动端
- **CSS-in-JS**: 使用PostCSS进行样式管理
- **主题系统**: 支持明暗主题切换

### 后端架构
- **Rust + Tauri**: 高性能的后端服务
- **SeaORM**: 数据库ORM框架
- **SQL聚合查询**: 高效的数据库查询
- **RESTful API**: 标准化的API接口

### 数据流程
1. 用户选择筛选条件
2. 前端发送请求到后端API
3. 后端执行数据库聚合查询
4. 返回统计数据给前端
5. 前端渲染图表和表格

## 文件结构

```
src/
├── features/money/
│   ├── views/
│   │   └── TransactionStatsView.vue          # 主统计页面
│   └── components/
│       ├── TransactionStatsFilters.vue        # 筛选器组件
│       ├── TransactionStatsCharts.vue         # 基础图表组件
│       ├── AdvancedTransactionCharts.vue       # 高级图表组件
│       └── TransactionStatsTable.vue         # 统计表格组件
├── pages/
│   └── transaction-stats.vue                 # 页面路由
├── services/money/
│   ├── transactions.ts                       # 交易服务
│   └── money.ts                             # 主服务类
├── utils/
│   └── echarts.ts                           # ECharts配置和工具
└── layouts/
    └── DefaultLayout.vue                     # 布局组件

src-tauri/crates/money/src/
├── dto/transactions.rs                       # 数据传输对象
├── services/transaction.rs                   # 交易服务
└── command.rs                               # API命令
```

## 使用方法

1. **访问统计页面**: 点击侧边栏的"Statistics"图标
2. **设置筛选条件**: 使用筛选器选择时间范围和分类
3. **查看统计结果**: 浏览概览卡片、图表和详细表格
4. **导出数据**: 使用表格下方的导出按钮

## 扩展功能

### 已实现
- ✅ 多维度时间统计
- ✅ 分类和子分类统计
- ✅ 筛选和搜索功能
- ✅ ECharts专业图表可视化
- ✅ 多种图表类型（柱状图、折线图、面积图、饼图、环形图、雷达图）
- ✅ 图表交互和动画效果
- ✅ 详细统计表格
- ✅ 响应式设计
- ✅ 主题系统支持

### 可扩展功能
- 📈 趋势预测分析
- 📋 数据导出（Excel、PDF）
- 🔔 异常交易提醒
- 📱 移动端手势操作
- 🌐 多语言支持
- 🎨 自定义图表主题
- 📊 更多图表类型（散点图、热力图等）
- 🔄 实时数据更新

## 性能优化

- **数据库索引**: 在关键字段上建立索引
- **查询优化**: 使用聚合查询减少数据传输
- **缓存机制**: 对频繁查询的数据进行缓存
- **分页加载**: 大数据集的分页处理
- **懒加载**: 组件和数据的按需加载

## 注意事项

1. **数据权限**: 确保用户只能查看自己的交易数据
2. **性能监控**: 监控大数据量查询的性能
3. **错误处理**: 完善的错误处理和用户提示
4. **数据一致性**: 确保统计数据的准确性
5. **安全性**: 防止SQL注入等安全问题
